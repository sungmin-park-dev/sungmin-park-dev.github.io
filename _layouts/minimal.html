<!doctype html>
<html lang="{{ site.lang | default: 'en' }}">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <title>{{ site.title }}</title>

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="{{ '/assets/img/favicons/apple-touch-icon.png' | relative_url }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ '/assets/img/favicons/favicon-32x32.png' | relative_url }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ '/assets/img/favicons/favicon-16x16.png' | relative_url }}">
    <link rel="manifest" href="{{ '/assets/img/favicons/site.webmanifest' | relative_url }}">

    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Emergence Design System CSS (CSS custom properties for theme switching) -->
    <link rel="stylesheet" href="{{ '/assets/css/emergence.css' | relative_url }}">

    <!-- FOUC prevention: apply saved theme before CSS renders -->
    <script>
      (function(){
        var t = localStorage.getItem('theme') || 'dark';
        document.documentElement.setAttribute('data-theme', t);
      })();
    </script>

    <style>
      /* Reset */
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
      }
    </style>
  </head>
  <body>
    {{ content }}

    <!-- Theme Toggle JS -->
    <script>
      (function(){
        var btn = document.getElementById('theme-toggle');
        var icon = document.getElementById('theme-icon');
        function updateIcon(theme) {
          if (!icon) return;
          icon.className = theme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
        }
        var currentTheme = document.documentElement.getAttribute('data-theme') || 'dark';
        updateIcon(currentTheme);
        if (btn) {
          btn.addEventListener('click', function() {
            var cur = document.documentElement.getAttribute('data-theme') || 'dark';
            var next = cur === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
            updateIcon(next);
          });
        }
      })();
    </script>
  </body>
</html>
